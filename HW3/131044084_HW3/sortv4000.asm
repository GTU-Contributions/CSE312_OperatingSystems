        ; 8080 assembler code
        .hexfile sortv4000.hex
        .binfile sortv4000.com
        ; try "hex" for downloading in hex format
        .download bin 
        .objcopy gobjcopy
        .postbuild echo "OK!"
        ;.nodump

		; OS call list
PRINT_B		equ 1
PRINT_MEM	equ 2
READ_B		equ 3
READ_MEM	equ 4
PRINT_STR	equ 5
READ_STR	equ 6
FORK		equ 7
EXEC		equ 8
WAITPID		equ 9

	; Position for stack pointer
stack   equ 04000h

	org 000H
	jmp begin

	; Start of our Operating System
GTU_OS:	PUSH D
	push D
	push H
	push psw
	nop	; This is where we run our OS in C++, see the CPU8080::isSystemCall()
		; function for the detail.
	pop psw
	pop h
	pop d
	pop D
	ret
	; ---------------------------------------------------------------
	; YOU SHOULD NOT CHANGE ANYTHING ABOVE THIS LINE  

; This program will sort the Numbers: using bubble sort
; And print the result on the screen
; Each number will be printed on a newline.
; Mehmed Mustafa 131044084 26/05/2017

Numbers: DB 49H,2dH,0ccH,46H,55H,89H,0a5H,0e8H,0e2H,10H,0ffH,0a8H,0ddH,3fH,0c1H,0f1H,98H,8bH,0a9H,9fH,9aH,0eaH,16H,84H,9dH,57H,2cH,0f4H,0ceH,32H,0e3H,68H,51H,3dH,0c8H,8eH,0daH,20H,7bH,57H,15H,16H,0efH,18H,1fH,6eH,2eH,39H,1bH,0abH,0b2H,89H,0ceH,0c4H,4cH,0d9H,0c3H,0d5H,0a1H,8cH,37H,2cH,18H,0eH,5eH,5dH,0feH,09H,0cdH,4eH,0e2H,91H,2dH,1bH,0f9H,0daH,0bfH,04H,2bH,4dH,92H,0caH,0f4H,0a6H,5fH,26H,04H,0f9H,0deH,52H,4fH,68H,0dH,8dH,0eeH,7eH,30H,7bH,3dH,0d8H,0cH,0f3H,0aH,87H,2bH,10H,2cH,0c0H,0bbH,31H,0caH,1bH,0efH,0e8H,5fH,17H,5dH,1eH,7dH,0d4H,0beH,0deH,07H,88H,31H,76H,56H,0abH,08H,99H,0a5H,0eaH,0b9H,20H,0c4H,48H,0eH,14H,88H,08H,15H,0e5H,0aH,0a5H,21H,16H,0d4H,0cbH,0b8H,8fH,87H,7bH,93H,59H,0f8H,0eaH,0d1H,0e6H,6eH,92H,0b5H,0c7H,46H,30H,0c3H,0d3H,2fH,0d4H,0d6H,27H,0feH,95H,0edH,10H,0fbH,0faH,39H,33H,72H,0b2H,71H,76H,33H,0ddH,4eH,0e4H,02H,80H,0cfH,0ddH,28H,45H,47H,0f3H,0f0H,0d8H,3aH,0eH,2bH,1cH,73H,39H,9dH,54H,01H,0c3H,8dH,1aH,46H,6fH,49H,0fcH,96H,0f4H,80H,0aH,0eeH,7eH,36H,79H,2aH,5bH,83H,0c3H,0beH,2fH,0d4H,0a4H,1eH,0c0H,0d9H,2eH,06H,4bH,65H,67H,93H,0dH,0b1H,0e6H,28H,0aaH,39H,79H,2aH,0faH,8eH,0f2H,63H,07H,92H,0a5H,0e3H,51H,80H,0cH,0aH,5aH,0d1H,0c3H,40H,0aH,17H,0fcH,7eH,5bH,46H,0bcH,92H,0ceH,86H,9dH,0efH,0d5H,43H,3aH,1aH,77H,2dH,0a6H,0ceH,0a0H,08H,15H,19H,0deH,3dH,00H,4cH,94H,0f7H,36H,0efH,0caH,07H,86H,0cbH,7cH,51H,46H,0eeH,07H,0cH,0ffH,9bH,1fH,76H,3eH,67H,7bH,6eH,14H,0eH,47H,0a8H,0d7H,0abH,0d2H,7cH,0d0H,63H,0deH,47H,0dbH,0fbH,02H,0a8H,0eaH,0dH,9bH,85H,22H,0a8H,0c6H,24H,1cH,2dH,58H,0d2H,85H,12H,0f7H,4fH,5fH,33H,0eeH,70H,0cdH,8cH,6dH,6cH,5bH,60H,16H,0a0H,0c4H,55H,0d1H,0dbH,0faH,25H,0b9H,0d2H,42H,0cfH,1dH,0edH,05H,0a4H,90H,57H,10H,3aH,0aH,0d2H,54H,4dH,84H,52H,07H,0e9H,60H,0dH,0a1H,51H,5eH,32H,0f0H,2bH,18H,0beH,0d5H,22H,0d7H,58H,0a5H,53H,0ecH,47H,0b8H,0f0H,0d8H,0f6H,0edH,0b0H,94H,07H,15H,3cH,2aH,6dH,83H,94H,09H,30H,0b2H,28H,0a6H,0fdH,6fH,5fH,0f6H,33H,8bH,04H,04H,0f8H,4bH,34H,31H,52H,37H,31H,2fH,0beH,0feH,92H,0a5H,0dcH,90H,01H,0dfH,91H,53H,0bcH,1bH,14H,9fH,0d4H,0fcH,0c1H,12H,0e1H,4aH,5aH,0edH,0cbH,31H,0b0H,34H,82H,1eH,0feH,62H,58H,75H,0afH,52H,0d2H,4eH,43H,0e8H,0cbH,82H,0eeH,56H,31H,0a3H,99H,37H,65H,42H,0cfH,18H,0efH,27H,21H,19H,78H,6cH,93H,51H,3eH,62H,5cH,67H,64H,0caH,0b9H,0faH,8fH,5dH,6bH,0faH,6aH,46H,55H,0acH,13H,0c2H,0bfH,9aH,0dcH,97H,0e6H,51H,3bH,7aH,9aH,01H,0aH,97H,0aeH,0c1H,47H,4dH,4bH,28H,45H,2fH,0edH,0d5H,9aH,0f4H,24H,0c7H,0efH,0f8H,0f5H,36H,53H,69H,77H,0b9H,38H,0fbH,26H,0ddH,0f4H,65H,0a4H,0b5H,81H,0d1H,0d2H,84H,0ceH,0afH,0ebH,0a4H,1cH,73H,3aH,0f3H,01H,23H,8fH,50H,58H,0baH,0beH,13H,00H,97H,0e0H,92H,79H,4fH,90H,0adH,2aH,0c7H,5fH,33H,0ddH,1aH,20H,7aH,0a1H,99H,1dH,0fbH,0c7H,0d6H,0b0H,64H,0d6H,0c8H,8bH,0b4H,97H,7bH,91H,33H,1aH,3dH,0faH,47H,9fH,0a1H,13H,0b0H,0adH,0b0H,0abH,6dH,1fH,53H,97H,0b4H,0e2H,0faH,0ffH,0eH,68H,48H,50H,18H,18H,0f5H,38H,0d4H,0ccH,3bH,9cH,86H,81H,69H,0a5H,0b7H,0abH,13H,0cfH,06H,9eH,10H,0a9H,62H,36H,9bH,38H,31H,80H,0e2H,83H,0dcH,0deH,0aaH,18H,00H,0b7H,0a9H,86H,0beH,0d5H,0aH,0c1H,3cH,66H,1dH,02H,0e3H,8bH,75H,0a4H,9fH,0ecH,08H,48H,32H,32H,0e2H,0e1H,0f1H,9bH,62H,0a9H,65H,3aH,1bH,0faH,3bH,0b4H,0d4H,76H,54H,0d4H,0c9H,1fH,16H,98H,48H,00H,0daH,51H,0e5H,92H,6cH,97H,87H,98H,0bdH,23H,38H,0c4H,04H,04H,59H,7fH,0c9H,7aH,8bH,05H,0b9H,1eH,97H,16H,0c5H,0a8H,97H,87H,43H,37H,0bH,9fH,9bH,1dH,55H,0baH,8bH,0b0H,7dH,79H,04H,0faH,8eH,0d0H,5bH,0d9H,0d7H,0e7H,0e9H,0a0H,0faH,3aH,6bH,0e5H,0c1H,48H,0f2H,61H,74H,28H,0b3H,43H,44H,0efH,19H,0adH,0d4H,0fbH,0eeH,35H,0faH,0cH,16H,0a6H,0d2H,0f5H,0e5H,0cH,0dcH,00H,0c3H,0acH,69H,87H,7fH,19H,82H,2cH,0e9H,10H,41H,0d2H,67H,0adH,05H,0c1H,51H,23H,42H,55H,85H,18H,0ffH,30H,0e3H,37H,37H,44H,0b2H,0adH,58H,0baH,69H,9cH,0e7H,0feH,0b7H,0abH,0daH,0a0H,9cH,93H,2cH,0b5H,5eH,74H,4dH,54H,65H,8eH,0c0H,0e9H,7eH,59H,8bH,05H,8cH,0bdH,9aH,0bcH,0c2H,9aH,5cH,15H,0dbH,62H,64H,9eH,42H,9aH,99H,0d6H,1aH,0cH,07H,0b1H,98H,0a8H,0cH,88H,24H,0ceH,4cH,86H,9bH,0f6H,8eH,8bH,0d0H,09H,0fcH,4dH,26H,0f5H,0e7H,12H,0f7H,1dH,0e0H,58H,01H,0f6H,0e0H,9dH,54H,5bH,0e1H,0e7H,15H,39H,53H,5dH,0beH,0f4H,0c8H,5cH,0bH,01H,18H,93H,0ffH,4aH,6eH,07H,0cdH,0cdH,0f9H,0c0H,0efH,0bdH,7cH,3aH,13H,0bfH,0beH,05H,58H,8eH,0dbH,36H,0d5H,28H,21H,0d4H,13H,0ffH,54H,5bH,0cfH,79H,2aH,6cH,0e9H,70H,0cfH,0ebH,0b7H,0e2H,83H,0fH,0a2H,32H,0f7H,36H,78H,0d6H,04H,1fH,18H,97H,0c4H,0aeH,0d9H,84H,86H,0ecH,24H,0efH,0eeH,64H,0b5H,4eH,0c3H,0c6H,8eH,7bH,30H,0e8H,0d4H,75H,93H,0f0H,10H,9dH,81H,6bH,00H,5aH,0e0H,0daH,0a3H,95H,0bbH,3fH,20H,4dH,52H,0a5H,00H,0b4H,78H,0a5H,0ffH,80H,0d3H,0c2H,0ffH,6cH,0afH,0eH,45H,65H,3bH,82H,5aH,0ddH,2aH,0baH,0ebH,4bH,34H,26H,0faH,78H,0a3H,0eaH,0bbH,63H,0b6H,0fH,0a7H,7fH,01H,00H,7cH,20H,7bH,7eH,2bH,32H,2eH,5dH,0f9H,0c2H,5aH,0b5H,5fH,02H,0b3H,21H,0aH,99H,1fH,23H,0bH,31H,99H,0ceH,88H,0f7H,91H,1bH,09H,1fH,0a9H,85H,3cH,2dH,99H,0ccH,12H,0edH,9cH,0c6H,0e0H,7cH,0f1H,99H,1fH,1cH,5bH,0b2H,7cH,45H,81H,0c2H,0d8H,0deH,9fH,0cbH,99H,0d8H,0f3H,0c7H,27H,94H,41H,32H,30H,87H,4fH,0bbH,0d5H,8dH,19H,57H,2aH,93H,2fH,1eH,0aaH,0cH,0f2H,7cH,11H,5dH,6bH,11H,70H,61H,94H,0e2H,0fdH,26H,0ecH,16H,10H,0feH,0e7H,0f9H,87H,4fH,6cH,5cH,52H,03H,96H,02H,0a8H,18H,0c4H,35H,0f1H,0d1H,98H,50H,09H,0d3H,0dcH,02H,0d4H,0daH,98H,21H,94H,0d2H,5dH,05H,0c4H,3dH,8dH,0e9H,11H,73H,11H,9dH,9bH,6eH,22H,0d7H,69H,0faH,0f0H,0fdH,02H,9bH,3eH,5cH,35H,0b7H,0c4H,85H,0f2H,27H,0abH,9aH,7fH,0faH,45H,95H,34H,62H,33H,02H,0eeH,05H,4cH,70H,90H,0aeH,0adH,0d4H,6dH,4aH,0a3H,66H,0d0H,3bH,0e3H,72H,0b4H,0f7H,33H,0c8H,0dcH,5aH,0beH,2dH,0acH,70H,0b4H,0d7H,7eH,7cH,0d7H,35H,0fH,05H,0fH,0f4H,5fH,0d3H,37H,0fbH,0a4H,0f6H,0eeH,71H,78H,0bfH,97H,0c1H,66H,95H,29H,9dH,81H,72H,0c0H,0d8H,0dH,53H,0baH,0baH,64H,6cH,9bH,90H,63H,51H,39H,2aH,0eaH,0deH,0c1H,4bH,3fH,00H,90H,2cH,0dbH,19H,4aH,3aH,6cH,0a0H,0a7H,13H,0f2H,7fH,0d1H,0bdH,0b2H,94H,28H,3fH,25H,40H,4eH,15H,0aH,1bH,0fbH,0e1H,30H,0ceH,6aH,0a5H,0dH,77H,0d9H,79H,0faH,68H,0dH,0cbH,0a5H,19H,0acH,3aH,2dH,52H,0f2H,0abH,0a9H,31H,2dH,64H,0a2H,0aH,0f0H,0b4H,0e4H,32H,33H,58H,41H,0a3H,0f2H,37H,2eH,5bH,0aaH,78H,0d4H,9dH,0bfH,76H,20H,0eeH,28H,0f3H,24H,29H,01H,0c2H,0e4H,4cH,0b9H,2bH,0f9H,99H,0b2H,8bH,02H,0b6H,03H,72H,2eH,5dH,99H,0e3H,73H,9dH,0e1H,17H,8aH,0a7H,70H,5aH,0f0H,21H,3cH,5dH,0d6H,0c6H,20H,02H,52H,0b4H,0bcH,93H,0fcH,2dH,72H,6cH,72H,0a7H,4aH,2cH,0c5H,0fdH,3fH,0b8H,1aH,3bH,0b0H,58H,0eaH,96H,40H,58H,02H,0b1H,0c7H,68H,53H,59H,5eH,7cH,13H,8aH,47H,0bdH,0cbH,87H,42H,76H,27H,0e6H,19H,88H,28H,72H,0e5H,0b6H,0f5H,37H,07H,3aH,16H,7aH,00H,7eH,58H,0bfH,0d9H,14H,9cH,0c0H,7cH,0fH,18H,0ccH,58H,67H,64H,0d6H,02H,0b9H,1eH,92H,6fH,85H,47H,0dcH,9aH,0deH,13H,0a1H,0d4H,0cdH,1dH,33H,0dfH,0beH,0e1H,19H,62H,62H,0a0H,2dH,0a9H,0abH,60H,5cH,0e2H,0c3H,0b9H,0aH,0d0H,06H,58H,0bbH,4bH,23H,20H,2bH,3fH,1fH,85H,67H,29H,0e2H,0cfH,0d2H,0adH,27H,0cdH,0e1H,73H,50H,6fH,6fH,0d5H,81H,0fbH,59H,02H,0c0H,0d9H,13H,0aeH,8bH,0c6H,22H,90H,72H,0d5H,50H,0f2H,79H,29H,9bH,05H,0b7H,4dH,56H,7aH,0baH,0ecH,06H,1aH,0f0H,0f9H,76H,00H,7fH,0b9H,0b4H,0a9H,6fH,0b4H,12H,8bH,2aH,87H,06H,7bH,63H,45H,6aH,0a5H,0cH,21H,3cH,68H,3eH,86H,0cfH,47H,65H,4fH,98H,39H,32H,4fH,83H,4aH,97H,0daH,8cH,0c8H,0aeH,5aH,0e5H,57H,0e3H,9cH,46H,0deH,0f5H,70H,59H,67H,0a9H,5cH,2aH,42H,46H,9aH,1dH,23H,3aH,0e5H,88H,0d0H,14H,60H,64H,84H,0d8H,2fH,0b0H,6eH,9fH,0bcH,0afH,33H,0d4H,0d3H,0e5H,0c8H,28H,77H,3dH,18H,8fH,0cbH,86H,0a4H,00H,59H,41H,0eH,38H,0deH,0e5H,0dH,98H,3cH,3bH,0cdH,33H,0c7H,33H,9cH,21H,0e9H,5dH,1dH,0dfH,6eH,0f0H,29H,0fcH,38H,0e7H,0e9H,7eH,8cH,4fH,9dH,6bH,0e3H,5aH,0e8H,50H,0bH,9fH,0b2H,0cdH,0d3H,0e8H,05H,0b7H,0a2H,32H,40H,55H,0d1H,0d0H,0f7H,03H,3cH,59H,11H,72H,0b5H,86H,0a9H,86H,81H,75H,0dH,77H,39H,58H,0d2H,90H,7aH,0b6H,0eeH,93H,36H,79H,4cH,64H,0c1H,8fH,7cH,39H,84H,49H,0e1H,60H,4eH,2fH,81H,99H,0fdH,1aH,78H,0c7H,0c9H,0f8H,0f5H,14H,4aH,3cH,0bbH,0faH,2dH,3bH,91H,0bH,64H,0e0H,93H,3aH,23H,49H,2fH,0afH,03H,97H,0d9H,0d7H,92H,62H,88H,51H,0f1H,73H,46H,22H,55H,0e8H,74H,62H,27H,0f4H,0a3H,8dH,24H,2dH,0ccH,14H,4dH,4cH,0e9H,29H,0d8H,60H,5aH,0c6H,3dH,0cbH,0c1H,76H,3aH,0f3H,0f6H,0cbH,0c0H,0c2H,14H,0b6H,23H,36H,6aH,52H,0ceH,92H,0aaH,3aH,6dH,6cH,8eH,0deH,0f1H,8dH,3eH,42H,0c0H,0e4H,1bH,9eH,32H,0d3H,0b8H,3fH,15H,0f0H,0fbH,0d5H,5aH,0f6H,0e1H,54H,35H,0e1H,0e7H,0f3H,21H,25H,91H,0fH,0eaH,18H,0c7H,39H,61H,0a3H,93H,74H,0fbH,0c6H,54H,0f8H,0f3H,0d1H,0beH,12H,33H,5bH,78H,81H,0afH,0fH,0cdH,2aH,8aH,0aH,0ebH,25H,4fH,8eH,97H,0feH,0aaH,22H,87H,36H,0acH,0afH,0f6H,0dfH,6aH,15H,24H,03H,8eH,0b4H,0b4H,2dH,0a5H,13H,7cH,0deH,0cfH,0dH,0a8H,1aH,23H,8fH,77H,09H,38H,0ebH,9cH,16H,0bdH,0a8H,0dfH,0e3H,92H,90H,59H,53H,2cH,0c1H,6cH,0bfH,0d5H,7cH,0b8H,42H,5aH,49H,07H,0ddH,0abH,0e1H,82H,23H,0feH,62H,8aH,8eH,0ddH,1eH,90H,58H,03H,7dH,9dH,22H,53H,66H,0bbH,01H,22H,0daH,3aH,0cH,0d7H,2aH,0bcH,90H,42H,0dcH,19H,6cH,42H,0aaH,6cH,65H,1dH,0a2H,04H,0a3H,5dH,27H,94H,0b3H,9dH,0beH,0e3H,13H,0d0H,12H,1dH,0d8H,6aH,51H,80H,0fbH,0b5H,0bdH,0c0H,17H,7dH,0ccH,0a3H,0adH,0a4H,48H,55H,0c1H,8fH,5fH,26H,7bH,88H,24H,0a7H,36H,6aH,5cH,0c1H,0a4H,28H,0b3H,8eH,0b8H,0e6H,25H,5dH,9bH,4dH,25H,0c2H,0a8H,0ecH,19H,0b4H,9fH,0c2H,0dbH,4eH,46H,25H,6aH,0beH,0e3H,7eH,07H,0b9H,0e4H,8aH,68H,15H,0e7H,2bH,29H,0feH,0d2H,0b5H,66H,0b1H,0dcH,0a1H,72H,0e4H,62H,0aeH,0c3H,5cH,13H,0bbH,34H,35H,0e4H,1eH,0d1H,0deH,0fdH,30H,0dfH,0caH,0aaH,0deH,0c1H,0f1H,0bbH,0f9H,84H,7dH,04H,0c7H,14H,9dH,0beH,0c1H,0a5H,0f5H,45H,0a3H,0ebH,7cH,48H,6fH,82H,2cH,0bbH,49H,0a6H,76H,0a8H,0bcH,7cH,0ebH,0aaH,84H,98H,54H,30H,83H,0c4H,0ebH,60H,1dH,10H,0f0H,42H,0abH,0ccH,05H,41H,0ebH,60H,12H,1dH,0deH,0c5H,22H,9cH,0b9H,0e9H,94H,04H,04H,0eH,0fbH,0b2H,6eH,0cbH,3eH,57H,0e8H,0faH,69H,0e6H,0b5H,89H,0daH,77H,41H,0c9H,25H,76H,77H,42H,30H,85H,18H,0ddH,27H,0a6H,7bH,78H,3aH,02H,08H,76H,1aH,0f5H,8cH,6cH,0a0H,2fH,0f8H,0f5H,0e6H,84H,81H,5fH,4bH,3dH,0b2H,0acH,43H,0b5H,35H,92H,0e5H,0adH,1eH,0dbH,2cH,0e9H,71H,75H,67H,0a0H,0d6H,0d3H,48H,40H,0fcH,5aH,89H,88H,0d3H,0e5H,62H,4cH,0a1H,82H,24H,0b4H,0eeH,73H,71H,2dH,47H,4eH,12H,67H,0dfH,0bdH,20H,35H,0b9H,0efH,1bH,0e0H,60H,05H,66H,0d5H,0a0H,0b6H,0f9H,92H,7aH,0bbH,0fdH,3dH,03H,13H,94H,0cdH,0d5H,10H,9fH,0ceH,0adH,58H,0c5H,0c2H,5bH,76H,33H,0bbH,36H,0a6H,46H,0d2H,0b5H,2cH,93H,72H,0a7H,8eH,0f0H,4eH,0ecH,76H,78H,47H,0b9H,11H,9bH,87H,98H,0a2H,0cbH,79H,35H,0cfH,0f0H,0ceH,93H,23H,45H,59H,05H,0dbH,0f9H,64H,0d5H,29H,0cfH,4aH,0d1H,0a4H,6eH,0aaH,09H,16H,02H,7aH,92H,7cH,09H,0e2H,06H,29H,0f7H,5dH,11H,94H,0b2H,6bH,0a5H,0b6H,57H,22H,08H,6dH,33H,98H,0b1H,1bH,0faH,2aH,5eH,37H,64H,0a8H,0f1H,8bH,0abH,0d7H,0ceH,34H,0fH,0eeH,4fH,76H,32H,5aH,30H,0d6H,0fcH,0baH,73H,2dH,68H,03H,5eH,6cH,0f4H,6dH,58H,0d2H,25H,44H,1fH,17H,0e1H,38H,0a5H,0f5H,34H,4dH,3eH,6aH,8cH,9cH,43H,0b8H,6cH,70H,93H,75H,0bcH,0aaH,0dH,7bH,88H,1dH,0f7H,0b8H,3dH,0e3H,0baH,8fH,6fH,76H,23H,75H,0e5H,88H,24H,35H,0dbH,0ecH,0f0H,0edH,80H,0dbH,13H,0dfH,0a6H,0bfH,38H,71H,0f4H,4bH,61H,0bdH,0a7H,41H,0c3H,71H,0cH,0faH,0e7H,10H,0a8H,0d3H,6aH,20H,71H,6aH,5eH,6aH,72H,0a5H,0f7H,0ddH,1bH,0cbH,0aeH,0dbH,0eeH,28H,21H,0eaH,0c4H,7dH,81H,0c5H,0c5H,9eH,0e3H,98H,43H,0c3H,0d0H,97H,0e1H,48H,0f5H,48H,74H,0fdH,53H,74H,18H,96H,20H,2bH,2eH,5cH,0f4H,0cdH,26H,0baH,5dH,0b1H,1aH,51H,6cH,0c1H,0f3H,15H,46H,1cH,12H,2dH,83H,0e3H,38H,0f7H,0c2H,0bdH,0eH,21H,14H,64H,0ceH,91H,0bcH,0e5H,0b7H,9fH,06H,84H,7eH,65H,0ccH,0e5H,0e8H,0d6H,02H,0b4H,10H,0b4H,0ecH,0dH,67H,28H,0f2H,25H,7fH,0bfH,0e3H,0a0H,2fH,0f7H,0afH,39H,73H,0c5H,7cH,0dH,0c9H,72H,0d2H,30H,0c4H,4aH,8fH,76H,3cH,0fcH,64H,7bH,4dH,7dH,0d5H,5cH,44H,0d5H,3dH,4cH,0c5H,0a0H,38H,0e0H,0b8H,6eH,0e7H,0f3H,27H,23H,8fH,82H,61H,0f8H,7aH,0d1H,1aH,48H,85H,75H,19H,0c4H,90H,28H,78H,5fH,02H,08H,0a8H,23H,22H,58H,2bH,0aaH,0dfH,9dH,0d7H,86H,0f9H,92H,0daH,9aH,0d5H,65H,71H,1eH,0ddH,47H,6fH,6fH,0ceH,0c0H,7cH,2cH,88H,0b9H,0b3H,6aH,72H,11H,73H,22H,0e3H,39H,7fH,0eeH,0baH,0a7H,7eH,4fH,0c7H,16H,8cH,3aH,6fH,0a4H,27H,0d5H,0fcH,0a3H,0c3H,0afH,4aH,89H,57H,36H,3cH,21H,0edH,8fH,25H,97H,0e6H,0b2H,7fH,0fH,0d3H,3bH,0d8H,1fH,9dH,0aaH,6fH,70H,4eH,0f3H,3cH,51H,45H,4eH,0d5H,0e4H,27H,08H,0aH,0bfH,0b9H,0f1H,0baH,8dH,26H,0ddH,1bH,7bH,0cfH,0f3H,0b6H,0bbH,36H,0b1H,49H,0e4H,32H,0a5H,0b4H,0cfH,0fH,0d5H,5cH,6bH,0ebH,58H,8aH,0bH,89H,9bH,1dH,33H,0a2H,4eH,0f4H,0cfH,6fH,54H,55H,0bbH,30H,0d6H,0c9H,4cH,99H,40H,0fdH,26H,6fH,52H,0d3H,0f3H,0cfH,0d1H,0bfH,0d3H,17H,04H,0faH,06H,0ebH,47H,63H,24H,12H,4bH,0f9H,0e5H,0b7H,0e4H,0d2H,59H,28H,6aH,97H,0c2H,0faH,19H,0e5H,0c5H,13H,0a1H,0bdH,0dH,9eH,06H,55H,0b7H,0cbH,60H,26H,0f7H,5dH,1dH,0fcH,72H,0aH,0eaH,0b9H,0e1H,0feH,0aeH,0a2H,65H,98H,8fH,20H,2dH,6bH,0fbH,10H,0c2H,4eH,90H,63H,0cH,6dH,54H,3fH,0e9H,06H,5eH,2dH,0cdH,0bdH,1bH,0d9H,2dH,79H,2aH,44H,0d3H,44H,81H,0a5H,0cdH,8fH,56H,84H,6eH,0dbH,06H,9eH,2bH,01H,21H,0c4H,0d0H,3bH,0cbH,6cH,88H,0b9H,0fdH,0deH,78H,3dH,33H,0e8H,45H,7fH,1cH,8bH,99H,9aH,8dH,0fcH,93H,0dH,0cdH,0a4H,84H,4bH,2aH,50H,0f3H,4bH,63H,0f1H,99H,08H,5cH,0dcH,85H,0f2H,4eH,5cH,19H,0acH,74H,4cH,0bbH,0fcH,0aeH,9dH,45H,0ffH,0b2H,86H,0d6H,02H,0d6H,8eH,9fH,0c9H,88H,54H,27H,0cH,46H,0e8H,37H,0e5H,16H,80H,0feH,0b3H,2fH,0a4H,9fH,1aH,0deH,0f2H,9eH,0f1H,0d2H,7aH,0e6H,43H,01H,53H,66H,8eH,91H,25H,80H,37H,0ffH,9cH,0b8H,44H,0cbH,0abH,0cbH,0b0H,0f9H,77H,0c5H,0fbH,0b2H,0a8H,0faH,98H,52H,0dbH,0eeH,7dH,0a8H,03H,5dH,0a6H,78H,73H,64H,92H,0fcH,96H,55H,0b4H,9fH,27H,0a7H,04H,0e1H,19H,24H,9bH,0f6H,0b1H,0eaH,0cbH,0e6H,77H,3aH,14H,0eH,08H,8cH,80H,2eH,67H,0b8H,08H,09H,0d7H,0cfH,1dH,0f9H,0c2H,00H,41H,48H,0f6H,03H,5aH,0b8H,53H,72H,85H,2bH,3eH,8bH,11H,0bcH,01H,50H,0a0H,0d4H,78H,96H,1aH,36H,86H,0f9H,7aH,0c4H,7eH,97H,2fH,97H,0baH,0a0H,0ccH,3bH,08H,0cdH,28H,20H,57H,0b6H,6fH,6aH,0ffH,7aH,0efH,22H,56H,6aH,2cH,0c4H,2cH,0eH,2cH,0ffH,60H,1fH,0dbH,0a7H,58H,0bcH,0b9H,0e6H,6dH,26H,57H,37H,5dH,0e3H,7eH,39H,27H,0ceH,58H,0d3H,02H,0d5H,34H,4aH,67H,5aH,0b6H,0ecH,12H,0d4H,0b5H,69H,15H,2bH,4cH,0a4H,75H,4eH,0d9H,0d6H,0ecH,80H,0e1H,6cH,0f5H,67H,5aH,0f4H,0a2H,0ccH,40H,74H,49H,9fH,10H,03H,43H,20H,40H,2eH,5cH,16H,0d5H,64H,76H,1bH,0cbH,0caH,0e6H,3eH,61H,68H,15H,0c0H,7bH,0aaH,0d0H,58H,0beH,40H,0f9H,0a0H,37H,2fH,0d4H,0b5H,64H,6eH,0eaH,0eaH,0e9H,89H,0d9H,0a6H,7dH,11H,0a2H,0e1H,3aH,1aH,9aH,8bH,81H,9bH,1aH,0f6H,03H,22H,0ffH,0a7H,99H,4eH,0aH,68H,3dH,03H,0a1H,39H,4fH,79H,4cH,7aH,71H,0dH,9aH,0b3H,9bH,6fH,0a9H,9cH,0b8H,72H,91H,45H,27H,7fH,0eaH,00H,0abH,0b3H,51H,52H,0fbH,0ecH,0e7H,06H,23H,00H,0c2H,2aH,0b1H,16H,7aH,0ffH,19H,0abH,0adH,1dH,31H,5eH,5cH,3dH,25H,04H,0cbH,6dH,55H,0f5H,65H,0f0H,42H,7dH,06H,6bH,0d5H,3cH,7fH,99H,38H,26H,16H,78H,9aH,64H,53H,69H,0bfH,71H,0f4H,0d4H,6eH,0feH,0daH,0a2H,0b2H,0cfH,49H,0e2H,0aH,1cH,0bcH,0c5H,0e9H,40H,0efH,0e1H,46H,1dH,0d3H,01H,3cH,66H,0bdH,23H,0bH,63H,07H,0a9H,55H,61H,7eH,09H,13H,30H,13H,1dH,3eH,93H,0aH,0c4H,36H,0d4H,0ceH,8fH,9eH,5dH,2aH,0c4H,3eH,0afH,0f1H,5fH,3fH,0dfH,98H,4cH,0f3H,0f4H,77H,0deH,0bH,7bH,5bH,9bH,4eH,13H,17H,5dH,0c9H,91H,0eH,13H,0e9H,4dH,0abH,2eH,33H,73H,99H,05H,0adH,0d3H,0ebH,81H,42H,61H,0c5H,0b2H,62H,36H,0b1H,0e8H,0bfH,0bdH,6cH,8aH,0f1H,97H,0e6H,73H,53H,0b8H,56H,0c0H,14H,47H,33H,0a3H,0e7H,0c2H,5bH,0a3H,0a3H,0b8H,80H,0a9H,54H,1dH,36H,95H,68H,19H,0b7H,0d7H,63H,19H,0c0H,0e7H,3bH,0bcH,61H,8dH,0edH,0f8H,0d0H,0d9H,0d6H,03H,96H,0dH,0abH,2aH,41H,0beH,21H,2eH,0f1H,0a7H,65H,0e1H,0dbH,0e5H,0e6H,9dH,68H,0bcH,16H,9eH,67H,0a0H,0edH,83H,0b7H,7dH,76H,61H,0beH,40H,1fH,50H,0b5H,5cH,5dH,0bcH,8aH,26H,16H,45H,2cH,89H,86H,0efH,0d2H,83H,0ebH,0b3H,0f5H,66H,0d8H,3cH,41H,0c7H,35H,0fbH,0d8H,42H,1eH,0f4H,0cfH,25H,0d0H,5eH,9fH,80H,1fH,77H,16H,0fcH,0a3H,1dH,23H,41H,0a5H,06H,0dH,9eH,67H,8aH,3dH,05H,9aH,0f4H,7fH,4cH,0f5H,04H,0a5H,0dH,0b5H,0a0H,14H,56H,17H,0eeH,45H,9aH,0d0H,4bH,0d5H,2fH,0a6H,77H,0d5H,0feH,0c4H,47H,8bH,06H,7aH,0f2H,4fH,99H,5aH,0e4H,0d0H,2dH,4dH,0cfH,4cH,0acH,5cH,75H,0bbH,0f5H,0e6H,2eH,0b5H,89H,91H,48H,0e7H,0cfH,31H,82H,53H,80H,0e3H,0b1H,4cH,0dbH,0f5H,0bH,1eH,0f3H,1aH,0feH,84H,7cH,0bH,2aH,0afH,21H,0f1H,73H,96H,01H,3dH,10H,0e1H,6dH,50H,6fH,3dH,0ccH,43H,2fH,9bH,0f8H,00H,34H,41H,0eH,07H,0c6H,0a7H,41H,0eaH,22H,7bH,28H,61H,27H,0ceH,8bH,0a6H,9aH,0b4H,6aH,0aH,94H,0d8H,17H,2fH,0bfH,0d6H,27H,0dcH,8cH,0afH,54H,3dH,0e0H,89H,0aeH,0a0H,22H,0fcH,75H,0a8H,8eH,0b6H,31H,3eH,0c5H,0b7H,0dbH,5bH,0dbH,26H,31H,6fH,0c8H,9aH,0c5H,0fdH,18H,0a2H,0efH,0fdH,7bH,6eH,86H,69H,0b5H,14H,0abH,0b0H,1fH,1cH,8fH,86H,04H,33H,0b7H,92H,15H,5cH,0fH,0eH,35H,0daH,65H,3bH,9eH,08H,49H,0cbH,0aaH,0c1H,14H,84H,1bH,0f8H,0aeH,0a4H,0b4H,0e2H,05H,58H,0cdH,0f7H,7dH,53H,0a3H,0f4H,9bH,6dH,0f5H,0ccH,19H,0b1H,0b9H,0c2H,06H,9eH,15H,51H,0b2H,0a7H,56H,24H,0a6H,0a4H,5cH,4eH,0aaH,0deH,0dcH,0f3H,0ddH,76H,0dH,9dH,51H,2fH,6bH,0f9H,0dcH,0c0H,87H,07H,08H,73H,65H,0fdH,0f4H,79H,2dH,55H,0f1H,73H,3bH,0daH,96H,5aH,3fH,6fH,9cH,18H,1dH,48H,0f2H,1cH,0feH,0fH,1aH,0bH,4dH,30H,7aH,0baH,0cbH,0feH,0ddH,34H,3bH,7cH,5fH,0eaH,0e7H,14H,25H,5eH,29H,0b3H,0e2H,77H,0b3H,3bH,63H,51H,77H,0e0H,84H,4aH,80H,2cH,0b8H,0e5H,58H,0cbH,76H,1bH,9fH,0bfH,96H,0f5H,3aH,2dH,18H,0c3H,41H,0afH,4eH,49H,40H,0e0H,0acH,2cH,0e8H,0d2H,0fH,99H,0fbH,0cbH,74H,0feH,0b3H,14H,4cH,0dfH,8cH,99H,0eeH,03H,15H,3cH,35H,0b5H,42H,22H,3eH,33H,5dH,0f4H,3cH,22H,81H,50H,0c4H,58H,0beH,45H,0a1H,0e0H,0a8H,0eaH,0d0H,2aH,98H,0c7H,0b5H,0b9H,0d9H,0abH,0b4H,73H,3cH,75H,0c9H,84H,84H,7aH,0c1H,3bH,0faH,15H,1fH,1bH,0fbH,02H,48H,0bH,25H,63H,17H,27H,7eH,4cH,9aH,0ddH,0eH,46H,03H,0a1H,5fH,0fH,0f8H,7aH,0f4H,88H,23H,52H,0efH,0f6H,0b2H,0aaH,49H,0e2H,0d8H,03H,7eH,09H,3aH,46H,3eH,5cH,73H,7dH,6eH,0f1H,0b1H,18H,25H,80H,36H,99H,0ffH,97H,88H,0e8H,6dH,47H,71H,20H,63H,0c4H,00H,0a0H,39H,89H,86H,0fbH,2aH,42H,79H,0f8H,0f8H,0f0H,0b5H,0d2H,76H,0e9H,36H,0d9H,0edH,85H,4fH,90H,0b8H,72H,86H,0edH,78H,0d1H,0a5H,0fdH,10H,0d6H,0bbH,2dH,0caH,0ecH,09H,0e1H,0f0H,0cfH,26H,31H,54H,70H,0dbH,27H,0b8H,15H,17H,12H,57H,46H,4cH,86H,9aH,0a0H,0e1H,6aH,24H,36H,0beH,0d9H,0e7H,2bH,0d3H,21H,0cH,0aH,71H,0e7H,0ffH,8fH,3fH,01H,50H,0abH,0d7H,8aH,14H,93H,66H,0d2H,61H,0c1H,20H,8cH,96H,02H,0a9H,7eH,71H,46H,0bdH,0b4H,0d7H,0c4H,59H,0adH,0efH,0f3H,0cfH,0ecH,07H,92H,0b6H,49H,0feH,0a1H,0c8H,0edH,98H,45H,12H,1aH,1eH,18H,0e8H,80H,0cbH,0b7H,0deH,0f9H,6fH,22H,90H,9fH,0e0H,0a0H,3bH,0b0H,64H,0a8H,02H,0e1H,48H,0e8H,8aH,17H,4dH,52H,9eH,40H,46H,4bH,2cH,0e8H,6bH,2aH,95H,84H,19H,0afH,51H,0bH,0fH,0c9H,59H,88H,22H,0ceH,7bH,4aH,8aH,18H,1aH,0f4H,0a3H,72H,0cbH,6dH,3dH,0efH,4aH,0b1H,0dH,83H,0a2H,3eH,5aH,0f8H
SWAPS_OCC ds 2		; Holds how many swaps occured

Begin:
	LXI SP, stack	; Always initialize the SP
	MVI A, 00H		; A = 00
	STA SWAPS_OCC	; SWAPS_OCC = 0
	LXI D, 3999  	; Initialize DE with Numbers size-1
	LXI H, Numbers	; Load Numbers in Registers H and L
	;MVI C, 26-1	; Initialize BC with the number
					; of elements - 1

; Outer Loop
Loop_Out:
	MVI A, 01H		; SWAPS_OCC holds how many swaps occured
					; currently initialized with 1
	STA SWAPS_OCC
	
	MOV B, D		; BC holds how many comparisons still 
	MOV C, E		; to be made in outloop
   ;MOV B, C		; B holds how many comparisons still 
					; to be made in outloop
					
; Inner Loop
Loop_In:
	MOV A, M		; Load A from memory -> by HL
	INX H 			; +1
	;INX H			; Point to the next element
	CMP M			; Compare A and next element
	JC Next			; Jump to NEXT if no swap needed
	
; Swaps two numbers
Swap:
	PUSH D
	MOV D, M	
	MOV M, A	 
	DCX H		 
	;DCX H		 
	MOV M, D	 
	INX H		 
	;INX H
	
	; ++SWAPS_OCC
	LDA SWAPS_OCC
	INR A
	STA SWAPS_OCC
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	;INR E			; ++E, increase swap counter
	
	POP D
Next:
	DCX B			;;; --BC
	JMP CheckBCzero	; Checks if BC is zero
	
; If zero come here, if non-zero jump to Loop_In
ZERO:	
	; --SWAPS_OCC, if no swaps occured	
	LDA SWAPS_OCC 		
	DCR A
	STA SWAPS_OCC
	;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
	
	; If A = 0, SWAPS_OCC = 0, jump to Exit
	;JZ Exit			; If zero, jump to Exit since 
					; sorting is done

	LXI H, Numbers	; Load Numbers in Registers H and L
	DCX D			;;; --DE
	JMP CheckDEzero ; Checks if DE is zero
					; If non-zero, jump to Loop_Out
					; to do the next number, else jumps to Exit

Exit:
	LXI H, Numbers	; Load Numbers in Registers H and L
	LXI D, 4000  	; Initialize DE with Numbers size
					; of Numbers
	JMP	Print		

; Checks if BC is zero	
CheckBCzero:
	MVI A, 00H		; A = 0
	CMP B 			; Compare A with B
	JZ  CheckC		; B is zero, jump to check C
	JMP Loop_In		; not zero, jump to Loop_In
CheckC:
	CMP C 			; Compare A with C
	JZ	ZERO		; C is also zero, BC is zero, jump to ZERO:
	JMP Loop_In 	; not zero, jump to Loop_In

; Checks if DE is zero
CheckDEzero:
	MVI A, 00H
	CMP D 			; Compare A with D
	JZ  CheckE 		; D is zero, jump to check E
	JMP Loop_Out	; not zero, jump to Loop_Out
CheckE:
	CMP E			; Compare A with E
	JZ 	Exit		; E is zero, jump to Exit
	JMP Loop_Out    ; not zero, jump to Loop_Out
	
; Checks if DE is zero for printing
CheckDEzero2:
	MVI A, 00H
	CMP D 			; Compare A with D
	JZ  CheckE2		; D is zero, jump to check E
	JMP	Print		; not zero, jump to Print
CheckE2:
	CMP E			; Compare A with E
	JZ	HALT		; E is zero, no more elements to print
	JMP Print		; not zero, jump to Print
	
; Prints the result
Print:
	MOV B, M		; Move element in HL to B
	MVI A, PRINT_B	; Store the OS call code to A
	call GTU_OS		; Call the OS
	INX H			; +1
	;INX H			; Point to the next element
	DCX D			; --DE
	JMP CheckDEzero2; Check if DE is zero, and 
					;jump to the desired position
HALT:
	hlt				; End the program